language: python
python:
- '3.6'
- '3.7'
- '3.8'
- '3.9'
- pypy3
cache: pip
install:
- pip install -r requirements-tests.txt
- pip install -r requirements.txt
- pip install coveralls
script:
- python -m pytest --junitxml ./reports/results.xml --cov-config .coveragerc --cov=src .
after_success:
- coveralls
deploy:
  provider: pypi
  user: mlasevich
  password:
    secure: NHMfFOdhEX9WEh03YNFJm2hQaogns9vXlAtKPJZtN0GTWqoSRZ1TPrQc7rrYSlfjTIPqBmNUlntRd0r8yE5bRkCNHTFwaexyLSVcJblwjhLAxz0xMKRSEmJWudT0IBliLCnQnIJCG9fTQEmVZKc76nr3WbTqcfwXWDG0O6FR/Adfyw6ChbAW0yqcJp27PMJB/22HdZAwf8s1556lKFQRwsygDZeFYwthbe1Hb1AoCep5hwWGXPxsACqm3qFtNSMQ+1oO2jKZ6KaRsxMLt8/vu4X2ENmm+6XA7XnadNRTkyqkka0PufhVwlf/sSiqaLD5CTV/5DG7zVnAOXGIdbSM8dPFJfC6zmK0e0E1CYa2Fl1y7lY2U5SfzNB5IcFlOnyEpLntBscS6srz8ZXLUwLMfhY/tpKgyGZlB8GfUA/F7unjsw1PNVakqZE0HdejNOERqOQOi+ztjKDEePtyWK8SLkwZ3L4p0SsHFn8cLMEFVm7zaetXmVzzF1uqzruoq5+8DWEzH6BYAM+nlHdid8U95hO9N9GMepM094GNdZFy6Ny5/mKbk02ESjKOyZm8f0evJcdm0d1zu2T3lijRgCwoYWWU1GcyBAuq/tw6JpZDfsGUUaAJ1ICG84PhGsZ27npyolUhHfsIO1PDdl9ilfV5A2+IC5XkZ2B+r96ZkfwYn5U=
  skip_existing: true
  distributions: sdist bdist_wheel
  on:
    tags: true
